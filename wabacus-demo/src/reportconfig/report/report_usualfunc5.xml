<?xml version="1.0" encoding="UTF-8"?>
<applications xmlns="http://www.wabacus.com"
					xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
					xsi:schemaLocation="http://www.wabacus.com ../xsd/wabacus.applications.xsd">
	<page id="skinpage1">
		<framepanel id="fp1" title="设置主题风格">
			<jsp id="jsp1" iframe="true" iframestyleproperty="frameborder='0' width='100%' height='200px'" >
				/wabacusdemo/jsp/tagpages/skinpage1_jsp1.jsp
			</jsp>
		</framepanel>
		<report id="report1" extends="listpage1.report1" top="15px"/>
		<report id="report2" top="15px" extends="detailpage1.report1"/>
	</page>
	
   <page id="roworderdragpage1">
		<report id="report1" title="员工信息列表" dataexport="richexcel"
			rowordertype="drag" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrderByDrag">
			<display>
				<col column="{sequence:1}" label="序号"/>
				<col column="no" label="工号" clickorderby="true" width="100px"  valuestyleproperty="style='mso-number-format:\@'" rowordervalue="true"/>
				<group label="姓名">
					<col column="name" label="中文名" clickorderby="true" filter="true" filterwidth="120px"/>
					<col column="ename" label="英文名" clickorderby="true" filter="true" filterwidth="150px"/>
				</group>
				<col column="birthday" label="出生日期" clickorderby="true"/>
				<group label="地区">
					<col column="province"  label="省份" filter="true"/>
					<col column="city"  label="城市" filter="true"/>
					<col column="county"  label="县城"/>
				</group>
				<col column="orderline" label="排序值" rowordervalue="true"/>
			</display>
			<sql>
				<value>
					<![CDATA[SELECT A.no,name,ename,orderline,marriage,birthday,joinindate,province,city,county,description FROM tbl_baseinfo A left join tbl_detailinfo B on A.no=B.no 
						where  {#condition#} order by orderline,no]]>
				</value>
				<condition name="txtgonghao" label="工号">
					<value>
						<![CDATA[(A.no like  '%#data#%')]]>
					</value>
					<inputbox>
					  <typeprompt width="-1" count="15">
						<promptcol label="no" matchmode="2"/>
						<datasource>select no from tbl_baseinfo where no like '%#data#%'</datasource>
					  </typeprompt>
					</inputbox>
				</condition>
			</sql>
			<format>
			  <value>
					birthday=birthday==null?"":birthday.trim();
					int idx=birthday.indexOf(" ");//判断是否有时间，有的话就去掉时间，只显示日期
					if(idx>0) birthday=birthday.substring(0,idx);
			  </value>
			</format>
		</report>
		<footer>
			<![CDATA[<br><font color='red'>提示：</font><font color='blue'>请点击记录行中空白部分进行拖动排序，对于排序值相同的记录行，则按工号进行排序</font>]]>
		</footer>
	</page>
	
	<page id="roworderarrowpage1">
		<tabpanel id="tp1" margin="10px" titlestyle="2">
			<report id="report1" parenttitle="自动生成排序箭头列" extends="roworderdragpage1.report1"
				rowordertype="arrow" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrderByArrow"/>
			<report id="report2" parenttitle="控制排序箭头列样式" extends="roworderdragpage1.report1"
				rowordertype="arrow" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrderByArrow">
				<display>
					<col column="orderline" displaytype="hidden" rowordervalue="true"/>
					<col column="{sequence:1}" label="序号"/>
					<col column="no" label="工号" clickorderby="true" width="100px"  valuestyleproperty="style='mso-number-format:\@'" rowordervalue="true"/>
					<group label="姓名">
						<col column="name" label="中文名" clickorderby="true" filter="true" filterwidth="120px"/>
						<col column="ename" label="英文名" clickorderby="true" filter="true" filterwidth="150px"/>
					</group>
					<col column="{roworder-arrow}" label="排序箭头一" valuestyleproperty="bgcolor='#f4f4f4'"/>
					<col column="birthday" label="出生日期" clickorderby="true"/>
					<col column="{roworder-arrow}" label="排序箭头二"/>
					<group label="地区">
						<col column="province"  label="省份" filter="true"/>
						<col column="city"  label="城市" filter="true"/>
						<col column="county"  label="县城"/>
					</group>
				</display>
			</report>
		</tabpanel>
		<footer>
			<![CDATA[<br><font color='red'>提示：</font><font color='blue'>点击上下箭头进行行排序，对于排序值相同的记录行，则按工号进行排序</font>]]>
		</footer>
	</page>
	<page id="roworderinputboxpage1" js="/webresources/script/validate.js">
		<tabpanel id="tp1" margin="10px" titlestyle="2">
			<report id="report1" parenttitle="自动生成排序输入框列" extends="roworderdragpage1.report1"
				rowordertype="inputbox" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrderByInputbox"/>
			<report id="report2" parenttitle="控制排序输入框列样式" extends="roworderdragpage1.report1"
				rowordertype="inputbox" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrderByInputbox">
				<display>
					<col column="orderline" displaytype="hidden" rowordervalue="true"/>
					<col column="{sequence:1}" label="序号"/>
					<col column="no" label="工号" clickorderby="true" width="100px"  valuestyleproperty="style='mso-number-format:\@'" rowordervalue="true"/>
					<group label="姓名">
						<col column="name" label="中文名" clickorderby="true" filter="true" filterwidth="120px"/>
						<col column="ename" label="英文名" clickorderby="true" filter="true" filterwidth="150px"/>
					</group>
					<col column="{roworder-inputbox}" label="排序输入框一" valuestyleproperty="bgcolor='#f4f4f4'"/>
					<col column="birthday" label="出生日期" clickorderby="true"/>
					<col column="{roworder-inputbox}" label="排序输入框二"/>
					<group label="地区">
						<col column="province"  label="省份" filter="true"/>
						<col column="city"  label="城市" filter="true"/>
						<col column="county"  label="县城"/>
					</group>
				</display>
			</report>
			<report id="report3" title="员工信息列表" parenttitle="通过可编辑报表更新排序列值" dataexport="richexcel" type="listform" jsvalidatetype="1">
				<display>
					<col column="{sequence:1}" label="序号"/>
					<col column="no" label="工号" clickorderby="true" width="100px"  valuestyleproperty="style='mso-number-format:\@'"/>
					<group label="姓名">
						<col column="name" label="中文名" clickorderby="true" filter="true" filterwidth="120px"/>
						<col column="ename" label="英文名" clickorderby="true" filter="true" filterwidth="150px"/>
					</group>
					<col column="birthday" label="出生日期" clickorderby="true"/>
					<group label="地区">
						<col column="province"  label="省份" filter="true"/>
						<col column="city"  label="城市" filter="true"/>
						<col column="county"  label="县城"/>
					</group>
					<col column="orderline" label="输入框排序">
						 <inputbox jsvalidate="isNotEmpty(${invalid.isnotempty}),isNumeric({0}不是合法数字)"/>
					</col>
				</display>
				<sql>
					<select>
						<value>
							<![CDATA[SELECT A.no,name,ename,orderline,marriage,birthday,joinindate,province,city,county,description FROM tbl_baseinfo A left join tbl_detailinfo B on A.no=B.no 
								where  {#condition#} order by orderline,no]]>
						</value>
						<condition name="txtgonghao" label="工号">
							<value>
								<![CDATA[(A.no like  '%#data#%')]]>
							</value>
							<inputbox>
							  <typeprompt width="-1" count="15">
								<promptcol label="no" matchmode="2"/>
								<datasource>select no from tbl_baseinfo where no like '%#data#%'</datasource>
							  </typeprompt>
							</inputbox>
						</condition>
					</select>
					<update>
						update tbl_detailinfo(@{orderline}) where no=@{no}
					</update>
				</sql>
				<format>
				  <value>
						birthday=birthday==null?"":birthday.trim();
						int idx=birthday.indexOf(" ");//判断是否有时间，有的话就去掉时间，只显示日期
						if(idx>0) birthday=birthday.substring(0,idx);
				  </value>
				</format>
				<buttons>
					<button name="btn1" extends="${save.button.default}" label="排序"/>
				</buttons>
				<footer>
					<![CDATA[<br><font color='red'>提示：</font><font color='blue'>输入排序值后点击“排序”按钮进行排序</font>]]>
				</footer>
			</report>
		</tabpanel>
	</page>
	
	<page id="rowordertoppage1" js="/webresources/script/validate.js">
		<tabpanel id="tp1" margin="10px" titlestyle="2">
			<report id="report1" parenttitle="自动生成置顶列" extends="roworderdragpage1.report1"
				rowordertype="top" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrderByTop"/>
			<report id="report2" parenttitle="控制置顶列样式" extends="roworderdragpage1.report1"
				rowordertype="top" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrderByTop">
				<display>
					<col column="orderline" displaytype="hidden" rowordervalue="true"/>
					<col column="{sequence:1}" label="序号"/>
					<col column="no" label="工号" clickorderby="true" width="100px"  valuestyleproperty="style='mso-number-format:\@'" rowordervalue="true"/>
					<group label="姓名">
						<col column="name" label="中文名" clickorderby="true" filter="true" filterwidth="120px"/>
						<col column="ename" label="英文名" clickorderby="true" filter="true" filterwidth="150px"/>
					</group>
					<col column="{roworder-top}" label="置顶一" valuestyleproperty="bgcolor='#f4f4f4'"/>
					<col column="birthday" label="出生日期" clickorderby="true"/>
					<col column="{roworder-top}" label="置顶二"/>
					<group label="地区">
						<col column="province"  label="省份" filter="true"/>
						<col column="city"  label="城市" filter="true"/>
						<col column="county"  label="县城"/>
					</group>
				</display>
			</report>
		</tabpanel>
	</page>
	
	<page id="rowordermixpage1" js="/webresources/script/validate.js">
		<report id="report1" extends="roworderdragpage1.report1"
				rowordertype="drag|inputbox|arrow|top" roworderclass="com.wabacusdemo.roworder.TestLoadStoreRowOrder">
			<display>
				<col column="orderline" label="排序值" rowordervalue="true" displaytype="hidden"/>
				<col column="{sequence:1}" label="序号"/>
				<col column="no" label="工号" clickorderby="true" width="100px"  valuestyleproperty="style='mso-number-format:\@'" rowordervalue="true"/>
				<group label="姓名">
					<col column="name" label="中文名" clickorderby="true" filter="true" filterwidth="120px"/>
					<col column="ename" label="英文名" clickorderby="true" filter="true" filterwidth="150px"/>
				</group>
				<col column="birthday" label="出生日期" clickorderby="true"/>
				<group label="地区">
					<col column="province"  label="省份" filter="true"/>
					<col column="city"  label="城市" filter="true"/>
					<col column="county"  label="县城"/>
				</group>
			</display>
		</report>
	</page>
	
	<page id="reportfixedrowscrollpage1">
	  <tabpanel id="tab1" titlestyle="2" margin="10" titlewidth="130px" >
		 <report id="report1" parenttitle="冻结标题行" pagesize="20" scrollheight="300px" fixedrows="title" 
		 		extends="normalcommonscrollpage1.report2" scrollwidth="" width=""/><!-- 覆盖掉父报表中的scrollwidth/width属性的配置 -->
		 <report id="report2" parenttitle="冻结部分数据行" pagesize="20" scrollheight="300px" fixedrows="5" 
		 		extends="normalcommonscrollpage1.report2" scrollwidth="" width=""/><!-- 覆盖掉父报表中的scrollwidth/width属性的配置 -->
	  </tabpanel>
	</page>
	
	<page id="reportfixedcolscrollpage1">
	  <tabpanel id="tab1" titlestyle="2" margin="10" titlewidth="130px" >
		 <report id="report1" parenttitle="冻结普通报表数据列" scrollwidth="1000px" width="1200px" fixedcols="2" 
		 		extends="normalcommonscrollpage1.report2"/>
		 <report id="report2" parenttitle="冻结分组报表数据列" scrollwidth="1000px" width="1200px" fixedcols="3"
		 		extends="rowgrouppage1.report2"/>
	  </tabpanel>
	</page>
	<page id="reportfixedbothscrollpage1">
	  <tabpanel id="tab1" titlestyle="2" margin="10" titlewidth="120px" >
		 <report id="report1" parenttitle="冻结普通报表" pagesize="20" scrollwidth="1000px" width="1200px" scrollheight="350px" fixedcols="2" fixedrows="title"
		 		extends="normalcommonscrollpage1.report2"/>
		 <report id="report2" parenttitle="冻结分组报表" scrollwidth="1000px" width="1200px" scrollheight="350px" fixedcols="3" fixedrows="title"
		 		extends="rowgrouppage1.report2"/>
	  </tabpanel>
	</page>
	
	<page id="spselectpage1">
	  	<tabpanel id="tab1" titlestyle="2" titlewidth="120px" margin="10">
	  		<report id="report1" title="员工信息列表" parenttitle="普通报表" dataexport="richexcel|word">
				<display>
					<col column="{sequence:0}" label="序号1"/>
					<col column="no" label="工号" clickorderby="true" filter="condition{txtno}"  valuestyleproperty="style='mso-number-format:\@'"/>
					<group label="个人资料">
						<group label="姓名">
							<col column="name" label="中文名" filter="true" filterwidth="120px" clickorderby="true"/>
							<col column="ename" label="英文名" filter="true" filterwidth="150px" clickorderby="true"/>
						</group>
						<col column="sex" label="性别" clickorderby="true"/>
						<col column="age" label="年龄" clickorderby="true"/>
					</group>
					<col column="joinindate" label="入职日期" clickorderby="true"/>
					<group label="籍贯">
						<col column="province" label="省" filter="condition{txtprovince}"/>
						<col column="city"  label="城市"/>
						<col column="county"  label="县城"/>
					</group>
				</display>
				<sql>
					<value>
						<![CDATA[call sp_selectEmployeeData(txtno,txtprovince,'30')]]><!-- 传入常量条件30，在存储过程中查询30岁以上的员工 -->
					</value>
					<condition name="txtno" label="工号">
						<inputbox>
						  <typeprompt width="-1" count="15">
							<promptcol label="no" matchmode="2"/>
							<datasource>select no from tbl_baseinfo where no like '%#data#%'</datasource>
						  </typeprompt>
						</inputbox>
					</condition>
					<condition name="txtprovince" label="省">
						<inputbox type="selectbox">
							<option label="全部" value=""/>
							<option source="@{select distinct province from tbl_area}" label="province" value="province"/>
						</inputbox>
					</condition>
				</sql>
				<format>
				  <value>
						sex=sex==null?"1":sex.trim();
						if(sex.equals("0")) sex="女";
						else sex="男";
						joinindate=joinindate==null?"":joinindate.trim();
						int idx=joinindate.indexOf(" ");//判断是否有时间，有的话就去掉时间，只显示日期
						if(idx>0) joinindate=joinindate.substring(0,idx);
				  </value>
				</format>
			</report>
	  		<report id="report2" parenttitle="行分组报表" pagesize="20" extends="spselectpage1.report1">
				<display>
					<group label="籍贯">
						<col column="province" label="省" filter="condition{txtprovince}" rowgroup="true" width="120px"/>
						<col column="city"  label="城市" rowgroup="true"/>
						<col column="county"  label="县城" rowgroup="true"/>
					</group>
					<col column="{sequence:0}" label="序号1"/>
					<col column="no" label="工号" clickorderby="true" filter="condition{txtno}"  valuestyleproperty="style='mso-number-format:\@'"/>
					<group label="个人资料">
						<group label="姓名">
							<col column="name" label="中文名" filter="true" filterwidth="120px" clickorderby="true"/>
							<col column="ename" label="英文名" filter="true" filterwidth="150px" clickorderby="true"/>
						</group>
						<col column="sex" label="性别" clickorderby="true"/>
						<col column="age" label="年龄" clickorderby="true"/>
					</group>
					<col column="joinindate" label="入职日期" clickorderby="true"/>
				</display>
			</report>
		 	<report id="report3" parenttitle="树形分组报表" extends="spselectpage1.report1" scrollheight="400px" width="1000px">
				<display>
					<col column="province" label="籍贯" filter="condition{txtprovince}" treerowgroup="true" width="120px"/>
					<col column="city"  label="城市" treerowgroup="true"/>
					<col column="county"  label="县城" treerowgroup="true"/>
					<col column="{sequence:0}" label="序号1"/>
					<col column="no" label="工号" clickorderby="true" filter="condition{txtno}"  valuestyleproperty="style='mso-number-format:\@'"/>
					<group label="个人资料">
						<group label="姓名">
							<col column="name" label="中文名" filter="true" filterwidth="120px" clickorderby="true"/>
							<col column="ename" label="英文名" filter="true" filterwidth="150px" clickorderby="true"/>
						</group>
						<col column="sex" label="性别" clickorderby="true"/>
						<col column="age" label="年龄" clickorderby="true"/>
					</group>
					<col column="joinindate" label="入职日期" clickorderby="true"/>
				</display>
			</report>
			<report id="report4" title="带统计的报表" extends="statisticpage2.report1" pagesize="10">
				<sql>
					<value>
						<![CDATA[call sp_selectEmployeeData(txtgonghao,txtprovince,'30')]]><!-- 传入常量条件30，在存储过程中查询30岁以上的员工 -->
					</value>
					<condition name="txtgonghao" label="工号">
						<value>
							<![CDATA[(A.no like  '%#data#%')]]>
						</value>
						<inputbox>
						  <typeprompt width="-1" count="15">
							<promptcol label="no" matchmode="2"/>
							<datasource>select no from tbl_baseinfo where no like '%#data#%'</datasource>
						  </typeprompt>
						</inputbox>
					</condition>
					<condition name="txtprovince" label="省">
						<value>
							<![CDATA[(province like %#data#%)]]>
						</value>
						<inputbox type="selectbox">
							<option label="全部" value=""/>
							<option source="@{select distinct province from tbl_area}" label="province" value="province"/>
						</inputbox>
					</condition>
				</sql>
			</report>
		</tabpanel>
	</page>
	<page id="controlpagedisplaypage1">
	  	<tabpanel id="tab1" titlestyle="2" titlewidth="120px" margin="10">
	  		<report id="report1" parenttitle="数据自动列表报表" pagesize="-1" extends="listpage1.report1" 
	  			interceptor="com.wabacusdemo.Interceptor_controlpagedisplaypage1Report1">
	  			<sql>
				<value>
					<![CDATA[SELECT no,name,sex,age,birthday,deptname FROM tbl_baseinfo A left join tbl_department B on A.deptno=B.deptno where  {#condition#} order by sex desc]]>
				</value>
				<condition name="txtno" label="工号">
					<value>
						<![CDATA[(no like  '%#data#%' )]]>
					</value>
				</condition>
				<condition name="txtname" label="姓名">
					<value>
						<![CDATA[(name like  '%#data#%' )]]>
					</value>
				</condition>
				<condition name="txtsex" label="性别">
					<value>
						<![CDATA[(sex =#data#)]]>
					</value>
					<inputbox type="selectbox">
						<option value="" label="性别"/>
						<option value="1" label="男"/> 
						<option value="0" label="女" />
					</inputbox>
				</condition>
			</sql>
	  		</report>
	  		<report id="report2" parenttitle="数据细览报表" extends="detailpage1.report1"
	  			interceptor="com.wabacusdemo.Interceptor_controlpagedisplaypage1Report2"/>
		</tabpanel>
	</page>
</applications>