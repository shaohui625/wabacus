<?xml version="1.0" encoding="UTF-8"?>
<applications xmlns="http://www.wabacus.com"
					xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
					xsi:schemaLocation="http://www.wabacus.com ../xsd/wabacus.applications.xsd">

	<local-resources>
    	<resources><!-- 
	     
	      	<resource key ="pOptions1" type="com.wabacus.extra..options.StringSplitOptionRes"  separator="[,;  　]"> 
	      	优秀,良好,较好,很差
	      	</resource>
	      	
	      <resource key ="pOptions2" type="com.wabacus.extra..options.MvelTextOptionRes" > 
	     ['优秀':1,'良好':2,'较好':3,'很差':4]
	      	</resource>
	      	<resource key ="pOptions3" type="com.wabacus.extra..options.MvelTextOptionRes" > 
	     	 {'优秀','良好','较好','很差'}
	      	</resource>
	      	<resource key ="pOptions4" type="com.wabacus.extra..options.MvelTextOptionRes" > 
	    '优秀,良好,较好,很差'.split(',')
	      	</resource>
	      <resource key ="pOptions5" type="com.wabacus.extra..options.YamlTextOptionRes" > 
	     {优秀 : 1, 良好 : 2, 较好 : 3, 很差 : 4}
	      	</resource>
	      	 -->
	 </resources>
</local-resources>

	<!-- 数据编辑篇报表类型  -->
	<page id="reportConfigMgr"  js="/webresources/script/validate.js"  data-write-roles="ROLE_SYS_ADMIN" data-read-roles="ROLE_USER">
	<!-- 
	 <interceptor>
	  		  <imports>
	  	 		   <import>com.wabacus.util.*</import>	
	  	 	  </imports>
	  	 	  <preaction>
	  	 		//rrequest.authorize("report1",null,null,"display","false");//将report1报表设置为不显示
	  	 		//rrequest.authorize("report2",null,null,"readonly","true");//将report2报表设置为只读
	  	 		//rrequest.authorize("report3",null,null,"disabled","true");//将report3报表设置为禁用
	  	 		rrequest.authorize("test102",null,null,"disabled","true");
	  	 	</preaction>
	  	 </interceptor>
	  
	   -->
	  	<tabpanel id="tp1" titlestyle="2" margin="10px" titlewidth="120px" >
	  
	  		<report id="report1"  title="url{tableName}数据列表" parenttitle="数据维护"   type="editablelist2"   dataexport="richexcel|plainexcel|word"
				 pk="_id"	  	pojoMapper="com.wabacus.extra.database.PojoJsonContentMapper"  jsonContentProp="jsonContent"
				 
				 				 historyRevFeature="true"
				 >
			<display>
						<col column="guid" property="_id"  displaytype="hidden" pk="true" />
		
						<col column="jsonContent" label="jsonData"  width="500px">
							<inputbox type="textareabox"></inputbox>
				   	 </col>
				    
						
					</display>
					<sql datasource="ds_mongo">
					  <select>
						<value>
							<![CDATA[
								@code{
										tabname ="report";
										orderBy = [ "_id":-1   ]
								}
								
							/*	setJsonResultMapper("jsonContent"); */
								var queryMap = this.getQueryConditionMap();
								findAsList(queryMap,tabname);
							]]>
						</value>
				
				
			<condition name="tableName" label="表名"  defaultvalue="report">
								<value>
									<![CDATA[
										this.setTabname(data);
									]]>
									</value>
						<!-- 
						
						<inputbox>
								 <typeprompt count="15"   >
											<promptcol label="label" value="value"  matchmode="2"/>
											<datasource>toPromptListMap(listTableNames())</datasource>
								</typeprompt>
						</inputbox>	
							 -->
						<inputbox type="selectbox">
							<option source="@{ toOptionsList(listTableNames()) }" label="label" value="value"/>
						</inputbox>
						
						
						</condition>
						<condition name="txtno" label="ID" br="false">
							<value>
								<![CDATA[
									newQuery().eq("_id",data)
								]]>
							</value>
						</condition>
						<condition name="mongoQuery" label="query expr(json)"  tip="mongo query map (json)" >
							<value>
								<![CDATA[
								jsonStrToMap(data)
								]]>
							</value>
						 <inputbox type="textareabox" styleproperty="cols='65' rows='2' style='' "  ></inputbox> 
								<!-- <inputbox styleproperty="length=200 style='width:160px;' "  ></inputbox>-->
						</condition>
				
					  </select>
<!-- 
	insert(attrs(["deptno","deptname","manager","builtdate","performance","description"]))
	insert(newAttrsBuilder(true).remove(["_id"]))
	insert(newAttrsBuilder(true).remove("_id"))
	
		insert("_id")
		
 -->
				<insert confirmessage="您确认要'保存'吗?" >
					insert()
				</insert>
				<!-- 
						update(attrs(["_id"]),attrs(["guid","deptno","deptname","manager","builtdate","performance","description"]))
						update("_id")
				 -->
				<update confirmessage="您确认要'保存'吗?" >
					update()
				</update>
				<!-- 
						delete(attrs(["_id"]));
						delete("_id");
				 -->
				<delete  confirmessage="您确认要'删除'吗?" >
						delete();
				</delete>
				</sql>
					</report>
	  	</tabpanel>
	  	
				<footer>
				<![CDATA[
					<br><font color="red">说明：</font><font color="blue"></font>
				]]>
				</footer>

	</page>

</applications>