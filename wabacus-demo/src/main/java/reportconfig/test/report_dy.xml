<?xml version="1.0" encoding="UTF-8"?>
<applications xmlns="http://www.wabacus.com"
					xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
					xsi:schemaLocation="http://www.wabacus.com ../xsd/wabacus.applications.xsd">

	<!-- 数据编辑篇报表类型  -->
	<page id="test110" js="/webresources/script/validate.js"  data-write-roles="ROLE_SYS_ADMIN" data-read-roles="ROLE_USER">
	<!-- 
	 <interceptor>
	  		  <imports>
	  	 		   <import>com.wabacus.util.*</import>	
	  	 	  </imports>
	  	 	  <preaction>
	  	 		//rrequest.authorize("report1",null,null,"display","false");//将report1报表设置为不显示
	  	 		//rrequest.authorize("report2",null,null,"readonly","true");//将report2报表设置为只读
	  	 		//rrequest.authorize("report3",null,null,"disabled","true");//将report3报表设置为禁用
	  	 		rrequest.authorize("test102",null,null,"disabled","true");
	  	 	</preaction>
	  	 </interceptor>
	  
	   -->
	  	<tabpanel id="tp1" titlestyle="2" margin="10px" titlewidth="120px" >
	  
	  		<report id="report1" title="部门信息列表" parenttitle="编辑方式一" type="crosslist"   dataexport="richexcel|plainexcel|word"
				 pk="guid"	 pojoTabname="tbl_department"   pojoclass="com.wabacusdemo.expr.PojoReport1"
				 ><!-- pojoclass="com.wabacusdemo.expr.PojoReport1" -->
			<display>
						<col column="guid" property="guid"  displaytype="hidden" pk="true"  idGenerator="UUID" />
						<col column="deptno" label="部门编号" clickorderby="true" valuestyleproperty="style='mso-number-format:\@'">
							<inputbox jsvalidate="isNotEmpty({0}列不允许为空)"/>
						</col>
						<col column="deptname" label="部门名" clickorderby="true"/>
						<col column="manager" label="部门经理"/>
						<col column="builtdate" label="创建日期" clickorderby="true" datatype="date{yyyy-MM-dd}">
							<inputbox type="datepicker"  jsvalidate="isDate({0}格式不对，必须为yyyy-MM-dd格式)"/>
						</col>
		
		<col column="{no-fromdb}"  property="fromdb110" realvalue="col_column"  clickorderby="true"
				dataset="class{com.wabacusdemo.expr.TestCrossListDynColGroupDataset3}"><!-- 
				<format>
				
					System.out.println("a:........");
				</format> -->
		</col>
			
						
						
						<col column="performance" label="表现" clickorderby="true" filter="true" >
						</col>
						<!-- 
						<col column="{no-fromdb}"   label="表现1" realvalue=""   property="month"  staticondition="month=#data#"   dataset="class{com.wabacusdemo.TestCrossListDynColGroupDataset1}" >
					layer3
								
						</col>
						 -->

						
					
					</display>
					<format>
					
							System.out.println("b....");
					</format>
					<sql datasource="ds_expr">
					  <select>
						<value>
							<![CDATA[
								@code{
										tabname ="tbl_department";
										orderBy = [ "guid":-1   ]
								}
								var queryMap = this.getQueryConditionMap();
								findAsList(queryMap,tabname);
							]]>
						</value>
						<condition name="txtdeptno" label="部门编号"  >
							<value>
								<![CDATA[
									newQuery().like("deptno",data)
								]]>
							</value>
							<inputbox>
								<typeprompt width="200" count="15">
									<promptcol label="deptno" matchmode="anywhere"/>
<!-- 									<datasource>findTypePrompts(newQuery().like("deptno",data).toMap(),tabname,typeObj)</datasource> -->
									
									
										<datasource>
								<option source='@{findTypePrompts(newQuery().like("deptno",data).toMap(),tabname,typeObj)}'/>
							</datasource>
								</typeprompt>
							</inputbox>
						</condition>
					  </select>
<!-- 
	insert(attrs(["deptno","deptname","manager","builtdate","performance","description"]))
	insert(newAttrsBuilder(true).remove(["guid"]))
	insert(newAttrsBuilder(true).remove("guid"))
	
		insert("guid")
		
 -->
				<insert confirmessage="您确认要'保存'吗?" >
					insert()
				</insert>
				<!-- 
						update(attrs(["guid"]),attrs(["guid","deptno","deptname","manager","builtdate","performance","description"]))
						update("guid")
				 -->
				<update confirmessage="您确认要'保存'吗?" >
					update()
				</update>
				<!-- 
						delete(attrs(["guid"]));
						delete("guid");
				 -->
				<delete  confirmessage="您确认要'删除'吗?" >
						delete();
				</delete>
				</sql>
			</report>
			
	  	</tabpanel>
	  	
				<footer>
				<![CDATA[
					<br><font color="red">说明：</font><font color="blue">这里演示“添加”时以默认窗口打开；“修改”时以最大化窗口打开</font>
				]]>
				</footer>

	</page>

</applications>